--[[
getgenv().enabled2=true
loadstring(game:HttpGet("https://raw.githubusercontent.com/Vcsk/RobloxScripts/main/Highlight-ESP.lua"))()
]]
local plr=game:GetService("Players")
local Lp=plr.LocalPlayer
local chr=Lp.Character
local rs=game:GetService("RunService")

-- esp text
local espObjects={}
local function applyESP(character)
if character and character:FindFirstChild("HumanoidRootPart") then
 local board=Instance.new("BillboardGui",character)
 board.Size=UDim2.new(0,180,0,40)
 board.Adornee=character:FindFirstChild("Head")
 board.StudsOffset=Vector3.new(0,2,0)
 board.AlwaysOnTop=true
 local text=Instance.new("TextLabel",board)
 text.Size=UDim2.new(1,0,1,0)
 text.Text="Loading..."
 text.TextColor3=Color3.new(1,1,1)
 text.TextSize=14
 text.Font="GothamBold"
 text.TextStrokeTransparency=0.5
 text.BackgroundTransparency=1
 espObjects[character]={highlight,board,text}
 end
end

local function updateESP()
for _,plr in pairs(plr:GetPlayers()) do
 if plr~=Lp and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
  local char=plr.Character
  local rootPart=char:FindFirstChild("HumanoidRootPart")
  local humanoid=char:FindFirstChild("Humanoid")
  local espData=espObjects[char]
  if rootPart and humanoid and espData then
   local distance=(rootPart.Position-Lp.Character.HumanoidRootPart.Position).Magnitude
   local health=math.floor(humanoid.Health)
   local maxHealth=math.floor(humanoid.MaxHealth)
   espData[3].Text=string.format("%.1fm | %d/%d HP | %s",distance,health,maxHealth,plr.DisplayName)
   end
  end
 end
end

local function refreshESP()
for _,data in pairs(espObjects) do
 for _,obj in pairs(data) do
  obj:Destroy()
 end
end
espObjects={}
for _,plr in pairs(plr:GetPlayers()) do
 if plr~=Lp and plr.Character then
  applyESP(plr.Character)
  end
 end
end

local holder2=game.CoreGui:FindFirstChild("ESPHolder") or Instance.new("Folder")
if enabled2==false then
 holder2:Destroy()
 for _,data in pairs(espObjects) do
  for _,obj in pairs(data) do
   obj:Destroy()
   end
  end
  espObjects={}
end

if holder2.Name=="Folder" then
 holder2.Name="BillboardHolder"
 holder2.Parent=game.CoreGui
end

if getgenv().enabled2==true then 
 getgenv().enabled2=false
 getgenv().enabled2=true
end

game:GetService("RunService").Heartbeat:Connect(function()
 if getgenv().enabled2 then
  task.wait()
   refreshESP()
   rs.RenderStepped:Connect(function()
    if toggleEspText then
     updateESP()
    end
   end)
  end
 end
end
end)

