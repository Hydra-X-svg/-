local plr=game:GetService("Players")
local Lp=plr.LocalPlayer
pcall(function()game:WaitForChild("CoreGui"):FindFirstChild("flyGui"):Destroy()end)
local chr=Lp.Character or Lp.CharacterAdded:Wait()
local hum=chr:WaitForChild("Humanoid")
local Hrp=chr:WaitForChild("HumanoidRootPart")
local gui=Instance.new("ScreenGui",game:GetService("CoreGui"))
gui.Name="flyGui"
gui.ResetOnSpawn=false

local frame=Instance.new("Frame",gui)
frame.Position=UDim2.new(0,-43,0,-2)
frame.Size=UDim2.new(0, 171, 0, 27)
frame.Active=true
frame.Draggable=true

local box=Instance.new("TextBox",frame)
box.Position=UDim2.new(0,88,0,28)
box.Size=UDim2.new(0,84,0,27)
box.BackgroundColor3=Color3.new(0,0,0)
box.BorderColor3=Color3.new(1,1,1)
box.Font="SourceSans"
box.Text="50"
box.PlaceholderText="Number..."
box.TextSize=12
box.TextColor3=Color3.new(1,1,1)
box.ClearTextOnFocus=true
box.TextWrapped=true

local function create(new,position,size,text,parent)
   local btn=Instance.new(new)
   btn.Position=position
   btn.Size=size
   btn.BackgroundColor3=Color3.new(0,0,0)
   btn.TextSize=25
   btn.Text=text
   btn.TextColor3=Color3.new(1,1,1)
   btn.BorderColor3=Color3.new(1,1,1)
   btn.TextScaled=true
   btn.TextWrapped=true
   btn.Font="SourceSans"
   btn.Parent=parent
   return btn
end

local speed=create("TextLabel",UDim2.new(0,88,0,56),UDim2.new(0,43,0,27),"50",frame)
local title=create("TextLabel",UDim2.new(0,88,0,0),UDim2.new(0,84,0,27),"FLY GUI",frame)
local toggle=false
local bv=Instance.new("BodyVelocity",Hrp)
bv.Name="VelocityHandler"
bv.MaxForce=Vector3.new(9e9,9e9,9e9)
bv.Velocity=Vector3.new(0,0,0)
local bg=Instance.new("BodyGyro",Hrp)
bg.Name="GyroHandler"
bg.CFrame=Hrp.CFrame
bg.MaxTorque=Vector3.new(9e9,9e9,9e9)
bg.P=1000
bg.D=50
function stop()
Hrp.VelocityHandler.MaxForce=Vector3.new(0,0,0)
Hrp.GyroHandler.MaxTorque=Vector3.new(0,0,0)
hum.PlatformStand=false
chr.Animate.Disabled=false
hum:SetStateEnabled(Enum.HumanoidStateType.Climbing,true)
hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Flying,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Freefall,true)
hum:SetStateEnabled(Enum.HumanoidStateType.GettingUp,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Landed,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Physics,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Running,true)
hum:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Seated,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Swimming,true)
end
stop()

Lp.CharacterAdded:Connect(function(newChar)
char=newChar
hum=newChar:WaitForChild("Humanoid")
Hrp=newChar:WaitForChild("HumanoidRootPart")
stop()
end)

local Signal1
local C=Workspace.CurrentCamera
local S=50
local controlModule=require(Lp.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
local rs=game:GetService("RunService")
Signal1=rs.RenderStepped:Connect(function(deltaTime)
if toggle then
Hrp.GyroHandler.CFrame=C.CoordinateFrame
local D=controlModule:GetMoveVector()
Hrp.VelocityHandler.Velocity=Vector3.new()
if D.X>0 then Hrp.VelocityHandler.Velocity=Hrp.VelocityHandler.Velocity+C.CFrame.RightVector*(D.X*S)end
if D.X<0 then Hrp.VelocityHandler.Velocity=Hrp.VelocityHandler.Velocity+C.CFrame.RightVector*(D.X*S)end
if D.Z>0 then Hrp.VelocityHandler.Velocity=Hrp.VelocityHandler.Velocity-C.CFrame.LookVector*(D.Z*S)end
if D.Z<0 then Hrp.VelocityHandler.Velocity=Hrp.VelocityHandler.Velocity-C.CFrame.LookVector*(D.Z*S)end
end
end)

box:GetPropertyChangedSignal("Text"):Connect(function()
if tonumber(box.Text) then
S=tonumber(box.Text)
speed.Text=box.Text
end
end)

local plus=create("TextButton",UDim2.new(0,44,0,28),UDim2.new(0,43,0,27),"+",frame)
local up
plus.MouseButton1Down:connect(function()
 up=plus.MouseEnter:connect(function()
  while up do
   task.wait(0.1)
   S=S+1
   speed.Text=S
   box.Text=S
  end
 end)
end)
plus.MouseLeave:connect(function()if up then up:Disconnect()up=nil;end;end)

local mine=create("TextButton",UDim2.new(0,44,0,56),UDim2.new(0,43,0,27),"-",frame)
local down
mine.MouseButton1Down:connect(function()
 down=mine.MouseEnter:connect(function()
  while down do
   if S==1 then 
    speed.Text="cannot be less than 1"
    box.Text=speed.Text
    wait()
    S=1
    speed.Text=S
    box.Text=S
   else
    task.wait(0.1)
    S=S-1
    speed.Text=S
    box.Text=S
   end
  end
 end)
end)
mine.MouseLeave:connect(function()if down then down:Disconnect()down=nil;end;end)
local noclip=create("TextButton",UDim2.new(0,0,0,28),UDim2.new(0,43,0,27),"Noclip: Off",frame)
local function toggleNoclip()
On=not On
if not chr then return end
  if On then
     noclip.Text="Noclip: On"
     local function KillCollisions()
         for _, part in ipairs(chr:GetDescendants()) do
             if part:IsA("BasePart") then
                 part.CanCollide=false
             end
         end
     end  
     KillCollisions()
     Clip=rs.Stepped:Connect(KillCollisions)
   else
     if Clip then
         Clip:Disconnect()
         Clip=nil
     end
     noclip.Text="Noclip: Off"
     for _, part in ipairs(chr:GetDescendants()) do
         if part:IsA("BasePart") then
            part.CanCollide=true
        end
    end
end
end
noclip.MouseButton1Click:Connect(toggleNoclip)
Lp.CharacterAdded:Connect(function()
if On then
    On = false
    if Clip then
        Clip:Disconnect()
        Clip=nil
    end
end
end)

local Up=create("TextButton",UDim2.new(1,-86,0,190),UDim2.new(0,50,0,50),"↑",gui)
Up.Visible=false
local up2
Up.MouseButton1Down:connect(function()
if toggle then
 up2=Up.MouseEnter:connect(function()
  while up2 do
   task.wait()
   Hrp.CFrame=Hrp.CFrame*CFrame.new(0,1,0)
   end
  end)
 end
end)
Up.MouseLeave:connect(function()if up2 then up2:Disconnect()up2=nil;end;end)

local Down=create("TextButton",UDim2.new(1,-86,0,250),UDim2.new(0,50,0,50),"↓",gui)
Down.Visible=false
local down2
Down.MouseButton1Down:connect(function()
if toggle then
 down2=Down.MouseEnter:connect(function()
  while down2 do
   task.wait()
   Hrp.CFrame=Hrp.CFrame*CFrame.new(0,-1,0)
   end
  end)
 end
end)
Down.MouseLeave:connect(function()if down2 then down2:Disconnect()down2=nil;end;end)

local UpDown=create("TextButton",UDim2.new(0,0,0,56),UDim2.new(0,43,0,27),"Up/Down",frame)
UpDown.MouseButton1Click:Connect(function()
if toggle then
 if Up.Visible then
  Up.Visible=false
  Down.Visible=false
else
  Up.Visible=true
  Down.Visible=true
  end
 end
end)

local flyBtn=create("TextButton",UDim2.new(0,132,0,56),UDim2.new(0,40,0,27),"Fly",frame)
flyBtn.MouseButton1Click:Connect(function()
toggle=not toggle
if toggle==true then
Hrp.VelocityHandler.MaxForce=Vector3.new(9e9,9e9,9e9)
Hrp.GyroHandler.MaxTorque=Vector3.new(9e9,9e9,9e9)
hum.PlatformStand=true
chr.Animate.Disabled=true
hum:SetStateEnabled(Enum.HumanoidStateType.Climbing,false)
hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Flying,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Freefall,false)
hum:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Landed,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Physics,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Running,false)
hum:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
elseif toggle==false then
Up.Visible=false
Down.Visible=false
stop()
end
end)

local x=create("TextButton",UDim2.new(0,0,0,0),UDim2.new(0,43,0,27),"X",frame)
x.MouseButton1Click:Connect(function()
stop()
Signal1:Disconnect()
gui:Destroy()
end)

local mini=create("TextButton",UDim2.new(0,44,0,0),UDim2.new(0,43,0,27),"-",frame)
mini.MouseButton1Click:Connect(function()
if box.Visible then
box.Visible = false
speed.Visible=false
flyBtn.Visible=false
plus.Visible=false
mine.Visible=false
noclip.Visible=false
UpDown.Visible=false
else
box.Visible = true
speed.Visible=true
flyBtn.Visible=true
plus.Visible=true
mine.Visible=true
noclip.Visible=true
UpDown.Visible=true
end
end)