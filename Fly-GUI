local plr=game:GetService("Players")
local Lp=plr.LocalPlayer
local rs=game:GetService("RunService")
local C=Workspace.CurrentCamera
local S=50
local toggle=false
local controlModule=require(Lp.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
pcall(function()game:WaitForChild("CoreGui"):FindFirstChild("flyGui"):Destroy()end)
local gui=Instance.new("ScreenGui",game:GetService("CoreGui"))
gui.Name="flyGui"
gui.ResetOnSpawn=false

local frame=Instance.new("Frame",gui)
frame.Position=UDim2.new(0,-43,0,-2)
frame.Size=UDim2.new(0, 171, 0, 27)
frame.Active=true
frame.Draggable=true

local box=Instance.new("TextBox",frame)
box.Position=UDim2.new(0,88,0,28)
box.Size=UDim2.new(0,84,0,27)
box.BackgroundColor3=Color3.new(0,0,0)
box.BorderColor3=Color3.new(1,1,1)
box.Font="SourceSans"
box.Text="50"
box.PlaceholderText="Number..."
box.TextSize=12
box.TextColor3=Color3.new(1,1,1)
box.ClearTextOnFocus=true
box.TextWrapped=true

local function create(new,position,size,text,parent)
 local btn=Instance.new(new,parent)
 btn.Position=position
 btn.Size=size
 btn.BackgroundColor3=Color3.new(0,0,0)
 btn.TextSize=25
 btn.Text=text
 btn.TextColor3=Color3.new(1,1,1)
 btn.BorderColor3=Color3.new(1,1,1)
 btn.TextScaled=true
 btn.TextWrapped=true
 btn.Font="SourceSans"
 return btn
end
local speed=create("TextLabel",UDim2.new(0,88,0,56),UDim2.new(0,43,0,27),"50",frame)
local title=create("TextLabel",UDim2.new(0,88,0,0),UDim2.new(0,84,0,27),"FLY GUI",frame)
local bv=Instance.new("BodyVelocity",Lp.Character.HumanoidRootPart)
bv.Name="VelocityHandler"
bv.MaxForce=Vector3.new(0,0,0)
bv.Velocity=Vector3.new(0,0,0)
local bg=Instance.new("BodyGyro",Lp.Character.HumanoidRootPart)
bg.Name="GyroHandler"
bg.MaxTorque=Vector3.new(9e9,9e9,9e9)
bg.P=1000
bg.D=50

local Signal1
Signal1=Lp.CharacterAdded:Connect(function(NewChar)
local bv=Instance.new("BodyVelocity",NewChar:WaitForChild("Humanoid").RootPart)
bv.Name="VelocityHandler"
bv.MaxForce=Vector3.new(0,0,0)
bv.Velocity=Vector3.new(0,0,0)
local bg=Instance.new("BodyGyro",NewChar:WaitForChild("Humanoid").RootPart)
bg.Name="GyroHandler"
bg.MaxTorque=Vector3.new(9e9,9e9,9e9)
bg.P=1000
bg.D=50
end)

local Signal2
Signal2=rs.RenderStepped:Connect(function()
local hum=Lp.Character.Humanoid
local hrp=Lp.Character.HumanoidRootPart
if Lp.Character and Lp.Character:FindFirstChildOfClass("Humanoid") and hrp and hrp:FindFirstChild("VelocityHandler") and hrp:FindFirstChild("GyroHandler") then
if toggle then
hrp.VelocityHandler.MaxForce=Vector3.new(9e9,9e9,9e9)
hrp.GyroHandler.MaxTorque=Vector3.new(9e9,9e9,9e9)
hum.PlatformStand=true
hum:SetStateEnabled(Enum.HumanoidStateType.Climbing,false)
hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Flying,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Freefall,false)
hum:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Landed,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Physics,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Running,false)
hum:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
hum:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
elseif toggle==false then
hrp.VelocityHandler.MaxForce=Vector3.new(0,0,0)
hrp.GyroHandler.MaxTorque=Vector3.new(0,0,0)
hum.PlatformStand=false
hum:SetStateEnabled(Enum.HumanoidStateType.Climbing,true)
hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Flying,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Freefall,true)
hum:SetStateEnabled(Enum.HumanoidStateType.GettingUp,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Landed,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Physics,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Running,true)
hum:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Seated,true)
hum:SetStateEnabled(Enum.HumanoidStateType.Swimming,true)
return
end

hrp.GyroHandler.CFrame=C.CoordinateFrame
local D=controlModule:GetMoveVector()
hrp.VelocityHandler.Velocity=Vector3.new()
if D.X>0 then hrp.VelocityHandler.Velocity=hrp.VelocityHandler.Velocity+C.CFrame.RightVector*(D.X*S)end
if D.X<0 then hrp.VelocityHandler.Velocity=hrp.VelocityHandler.Velocity+C.CFrame.RightVector*(D.X*S)end
if D.Z>0 then hrp.VelocityHandler.Velocity=hrp.VelocityHandler.Velocity-C.CFrame.LookVector*(D.Z*S)end
if D.Z<0 then hrp.VelocityHandler.Velocity=hrp.VelocityHandler.Velocity-C.CFrame.LookVector*(D.Z*S)end
end
end)

local plus=create("TextButton",UDim2.new(0,44,0,28),UDim2.new(0,43,0,27),"+",frame)
local up
plus.MouseButton1Down:connect(function()
 up=plus.MouseEnter:connect(function()
  while up do
   task.wait(0.1)
   S=S+1
   speed.Text=S
   box.Text=S
  end
 end)
end)
plus.MouseLeave:connect(function()if up then up:Disconnect()up=nil;end;end)

local mine=create("TextButton",UDim2.new(0,44,0,56),UDim2.new(0,43,0,27),"-",frame)
local down
mine.MouseButton1Down:connect(function()
 down=mine.MouseEnter:connect(function()
  while down do
   if S==1 then 
    speed.Text="cannot be less than 1"
    box.Text=speed.Text
    task.wait()
    S=1
    speed.Text=S
    box.Text=S
  else
    task.wait(0.1)
    S=S-1
    speed.Text=S
    box.Text=S
   end
  end
 end)
end)
mine.MouseLeave:connect(function()if down then down:Disconnect()down=nil;end;end)

local noclip=create("TextButton",UDim2.new(0,0,0,28),UDim2.new(0,43,0,27),"Noclip: Off",frame)
noclip.MouseButton1Click:Connect(function(s)
getgenv().Noclip=s
if Noclip then
 rs.Heartbeat:Connect(function()
 if Noclip then
  noclip.Text="On"
  Lp.Character.Head.CanCollide=false
  Lp.Character.Torso.CanCollide=false
else
  noclip.Text="Off"
  Lp.Character.Head.CanCollide=true
  Lp.Character.Torso.CanCollide=true
  end
 end)
end
end)

local Up=create("TextButton",UDim2.new(1,-86,0,190),UDim2.new(0,50,0,50),"↑",gui)
Up.Visible=false
local up2
Up.MouseButton1Down:connect(function()
if toggle then
 up2=Up.MouseEnter:connect(function()
  while up2 do
   task.wait()
   Lp.Character.HumanoidRootPart.CFrame=Lp.Character.HumanoidRootPart.CFrame*CFrame.new(0,1,0)
   end
  end)
 end
end)
Up.MouseLeave:connect(function()if up2 then up2:Disconnect()up2=nil;end;end)

local Down=create("TextButton",UDim2.new(1,-86,0,250),UDim2.new(0,50,0,50),"↓",gui)
Down.Visible=false
local down2
Down.MouseButton1Down:connect(function()
if toggle then
 down2=Down.MouseEnter:connect(function()
  while down2 do
   task.wait()
   Lp.Character.HumanoidRootPart.CFrame=Lp.Character.HumanoidRootPart.CFrame*CFrame.new(0,-1,0)
   end
  end)
 end
end)
Down.MouseLeave:connect(function()if down2 then down2:Disconnect()down2=nil;end;end)

local UpDown=create("TextButton",UDim2.new(0,0,0,56),UDim2.new(0,43,0,27),"Up/Down",frame)
UpDown.MouseButton1Click:Connect(function()
if toggle then
 if Up.Visible then
  Up.Visible=false
  Down.Visible=false
else
  Up.Visible=true
  Down.Visible=true
 end
end
end)

local flyBtn=create("TextButton",UDim2.new(0,132,0,56),UDim2.new(0,40,0,27),"Fly",frame)
flyBtn.MouseButton1Click:Connect(function()
toggle=not toggle
if toggle==false then
 Up.Visible=false
 Down.Visible=false
end
end)

local mini=create("TextButton",UDim2.new(0,44,0,0),UDim2.new(0,43,0,27),"-",frame)
mini.MouseButton1Click:Connect(function()
if box.Visible then
box.Visible=false
speed.Visible=false
flyBtn.Visible=false
plus.Visible=false
mine.Visible=false
noclip.Visible=false
UpDown.Visible=false
else
box.Visible=true
speed.Visible=true
flyBtn.Visible=true
plus.Visible=true
mine.Visible=true
noclip.Visible=true
UpDown.Visible=true
end
end)

local Signal3
Signal3=box:GetPropertyChangedSignal("Text"):Connect(function()
if tonumber(box.Text) then
S=tonumber(box.Text)
speed.Text=box.Text
end
end)

local x=create("TextButton",UDim2.new(0,0,0,0),UDim2.new(0,43,0,27),"×",frame)
x.MouseButton1Click:Connect(function()
Signal1:Disconnect()
Signal2:Disconnect()
Signal3:Disconnect()
Lp.Character.Humanoid.Health=0
gui:Destroy()
end)